
\ProvidesExplPackage{UNAL Modular Template}{2025/08/06}{1.0.0}{Modular template for Math/CS articles for the Universidad Nacional de Colombia}
\NeedsTeXFormat{LaTeX2e}

%%% Main Template Packages %%%

\RequirePackage{xifthen} % Template stuff 
\RequirePackage{graphicx} % Images
\RequirePackage{tcolorbox} % Color Box
\RequirePackage{geometry} % Page Geometry
\RequirePackage{fancyhdr} % Header / Footer Styles
\RequirePackage{extramarks} % Header / Footer Marks

\RequirePackage{ragged2e} % Text Align
\RequirePackage{amsmath} % Math Align

\RequirePackage{booktabs} % Tables+ Package
\RequirePackage[inline]{enumitem} % Enumarate+ Package
\RequirePackage{xparse} % Command Args Split Package
\RequirePackage{xstring} % Command Args Strings Handling Package

\RequirePackage{mathtools} % Math General
\RequirePackage{amsthm} % Math Envs
\RequirePackage{unicode-math} % Math Symbols

\RequirePackage{polyglossia} % Language
    \setdefaultlanguage{spanish}

%%% Variables and Such %%%

\ifthenelse{\isundefined{\TemplatePath}}{%
    \def\TemplatePath{template/}
}{}

%%% Header / Footer Styles %%%

\pagestyle{fancy}
\RenewDocumentCommand{\headrule}{}{%
    \rule[0.1cm]{\textwidth}{0.1mm}%
    \vspace{-0.75cm}
}

\ifthenelse{\isundefined{\MyTitle}}{}{%
    \fancyhf[HC]{{\slshape \MyTitle{}}}
}%

\RenewDocumentCommand{\footrule}{}{%
    \rule[0.1cm]{\textwidth}{0.1mm}%
}

\renewcommand{\thefootnote}{\Roman{footnote}} 
    % Changing footnotes arabic to roman numbers

%%% Redefine \maketitle %%% 

\NewDocumentCommand{\normalTemplateTitle}{s}{%
    \begin{@twocolumntrue}%
        \begin{minipage}{0.3\textwidth}%
            \begin{Center}
                \includegraphics[width=0.6\textwidth]{\TemplatePath src/unal_logo.pdf}%
            \end{Center}
        \end{minipage}%
        \begin{minipage}{0.7\textwidth}{%
            \begin{Center}
                \ifthenelse{\isundefined{\MyClass}}{%
                    {\large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[0ex]%
                }{%

                    {\large \itshape \MyClass{}} \\[1ex]
                }%
                \ifthenelse{\isundefined{\MyTitle}}{%
                    {\huge Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
                }{%
                    {\huge \slshape \MyTitle{}} \\[4ex]%
                }%
                \ifthenelse{\isundefined{\MyAuthor}}{%
                    {\Large Set \textbackslash{}def\textbackslash{}MyAuthor\{your\_name\} in the preamble} \\%
                }{%
                    {\Large \MyAuthor{}} \\%
                }%
                \ifthenelse{\isundefined{\MyEmail}}{%
                    {\small Set \textbackslash{}def\textbackslash{}MyEmail\{your\_email\} in the preamble} \\[4ex]%
                }{%
                    {\small \MyEmail{}} \\[4ex]%
                }%
                \ifthenelse{\isundefined{\MyDate}}{%
                    Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble%
                }{%
                    \MyDate{}%
                }%
            \end{Center}
        }%
        \end{minipage}%
    \end{@twocolumntrue}%
    \begin{Center}%
        \rule[0cm]{\textwidth}{0.1mm}%
    \end{Center}%
    \vspace{0.25cm}%
}

\NewDocumentCommand{\smallTemplateTitle}{s}{%
    \begin{@twocolumntrue}
        \begin{minipage}{0.1\textwidth}
            \begin{Center}
                \includegraphics[width=0.75\textwidth]{\TemplatePath src/unal_logo.pdf}%
            \end{Center}
        \end{minipage}
        \hspace{0.05\textwidth}
        \begin{minipage}{0.4\textwidth}
            \begin{Center}
                \ifthenelse{\isundefined{\MyClass}}{%
                    {\large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[1ex]%
                }{%
                    {\large \itshape \MyClass{}} \\
                }%
                \ifthenelse{\isundefined{\MyTitle}}{%
                    {\Large Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
                }{%
                    {\Large \slshape \MyTitle{}} \\%
                }%
                \ifthenelse{\isundefined{\MyDate}}{%
                    {\footnotesize Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble}%
                }{%
                    {\footnotesize \MyDate{}}%
                }%
            \end{Center}
        \end{minipage}
        \begin{minipage}{0.4\textwidth}
            \begin{FlushRight}
                \ifthenelse{\isundefined{\MyAuthor}}{%
                    {Set \textbackslash{}def\textbackslash{}MyAuthor\{your\_name\} in the preamble} \\%
                }{%
                    {\MyAuthor{}} \\[-1ex]%
                }%
                \ifthenelse{\isundefined{\MyEmail}}{%
                    {\footnotesize Set \textbackslash{}def\textbackslash{}MyEmail\{your\_email\} in the preamble} \\[4ex]%
                }{%
                    {\footnotesize \MyEmail{}}%
                }%
            \end{FlushRight}
        \end{minipage}
    \end{@twocolumntrue}
    \begin{Center}%
        \rule[0cm]{\textwidth}{0.1mm}%
    \end{Center}%
    \vspace{0.25cm}%
}

\RenewDocumentCommand{\maketitle}{O{}}{%
    \SetDocMargins{}

    \IfNoValueTF{#1}{%
        \normalTemplateTitle{}%
    }{\IfStrEq{#1}{small}{%
        \smallTemplateTitle{}%
    }{%
        \normalTemplateTitle{}%
    }}
}

%%% General Structure Stuff %%%

% Set Document Margins
\NewDocumentCommand{\SetDocMargins}{s}{%
    \newgeometry{%
        vmargin=2cm,%
        hmargin=2.25cm,%
        headheight=22pt%
    }
}

% Enumerate Lists types
\newcommand{\listSubscript}[2]{\(#1_{#2}\)}
\newcommand{\listAlph}{\alph*.}
\newcommand{\listAlphP}{\alph*.)}
\newcommand{\listALPH}{\Alph*.}
\newcommand{\listALPHP}{\Alph*.)}

% Proof, Text, Context Cases
\newtheorem{TMPMathCases}[]{Caso}
\NewDocumentCommand{\ResetCases}{} {\setcounter{TMPMathCases}{0}}
\NewDocumentEnvironment{mathcase}{O{}m} {%
    \IfValueTF{#1}{%
        \begin{TMPMathCases}[#1] % 
            #2%
        \end{TMPMathCases}%
    }{%
        \begin{TMPMathCases} % 
            #2%
        \end{TMPMathCases}%
    }
} {}

% Document Definitions
\newtheorem{TMPMathDefinition}{Definición}
\NewDocumentEnvironment{definition}{+b} {%
    \begin{tcolorbox}[left=1ex,right=1ex]%
        \begin{TMPMathDefinition}%
            #1 %
            \hspace{\fill}\(\bigtriangleup\)%
        \end{TMPMathDefinition}%
    \end{tcolorbox}%
} {}

% Document Proposition, Theorems, Lemmas and Colloraries

% Theorems
\newtheorem{TMPMathTheorem}{Teorema}
\NewDocumentEnvironment{theorem}{+b} {%
    \begin{TMPMathTheorem}%
        #1 %
    \end{TMPMathTheorem}%
} {}

% Theorems
\newtheorem{TMPMathProposition}[TMPMathTheorem]{Proposición}
\NewDocumentEnvironment{proposition}{+b} {%
    \begin{TMPMathProposition}%
        #1 %
    \end{TMPMathProposition}%
} {}

% Lemma
\newtheorem{TMPMathLemma}[TMPMathTheorem]{Lema}
\NewDocumentEnvironment{lemma}{+b} {%
    \begin{TMPMathLemma}%
        #1 %
    \end{TMPMathLemma}%
} {}

% Collorary
\newtheorem{TMPMathCorollary}[TMPMathTheorem]{Corolario}
\NewDocumentEnvironment{corollary}{+b} {%
    \begin{TMPMathCorollary}%
        #1 %
    \end{TMPMathCorollary}%
} {}

%%% General Fast Binds %%% 

% Fast Sup and Sub -scripts
\NewDocumentCommand{\fsup}{m} {\textsuperscript{#1}}
\NewDocumentCommand{\fsub}{m} {\textsubscript{#1}}

% Fast Set of Numbers 
\def\nsN{\ensuremath{\mathbb{N}}} % Natural
\def\nsZ{\ensuremath{\mathbb{Z}}} % Integer
\def\nsQ{\ensuremath{\mathbb{Q}}} % Rational
\def\nsI{\ensuremath{\mathbb{I}}} % Irational
\def\nsR{\ensuremath{\mathbb{R}}} % Real
\def\nsC{\ensuremath{\mathbb{C}}} % Complex

% Fast Function
\NewDocumentCommand{\ffunc}{mm}{\ensuremath{%
    #1\left(#2\right)%
}}

% Fast Function Domain
\NewDocumentCommand{\fdom}{m}{\ensuremath{%
    \text{Dom}\left( #1 \right)%
}}

% Fast Function Image 
\NewDocumentCommand{\fimg}{m}{\ensuremath{%
    \text{Im}\left( #1 \right)%
}}

% Fast Kernel
\NewDocumentCommand{\fker}{m}{\ensuremath{%
    \text{ker}\left( #1 \right)%
}}

% Fast Set 
\NewDocumentCommand{\fset}{m}{\ensuremath{%
    \left\{ #1 \right\}%
}}
