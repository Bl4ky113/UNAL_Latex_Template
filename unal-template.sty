
\ProvidesPackage{unal-template}[%
    2025/09/04 --- 1.0.1; %
    UNAL Modular Template; %
    Modular template for Math/CS articles for the Universidad Nacional de Colombia %
]
\NeedsTeXFormat{LaTeX2e}

%%% Main Template Packages %%%

\RequirePackage{xifthen} % Template stuff 
\RequirePackage{graphicx} % Images
\RequirePackage{tcolorbox} % Color Box
\RequirePackage{geometry} % Page Geometry
\RequirePackage{fancyhdr} % Header / Footer Styles
\RequirePackage{extramarks} % Header / Footer Marks

\RequirePackage{ragged2e} % Text Align
\RequirePackage{amsmath} % Math Align

\RequirePackage{booktabs} % Tables+ Package
\RequirePackage[inline]{enumitem} % Enumarate+ Package
\RequirePackage{xstring} % Command Args Strings Handling Package

\RequirePackage{mathtools} % Math General
\RequirePackage{amsthm} % Math Envs
\RequirePackage{unicode-math} % Math Symbols

\RequirePackage{polyglossia} % Language
    \setdefaultlanguage{spanish}

%%% Variables and Such %%%

\ifthenelse{\isundefined{\TemplatePath}}{%
    \def\TemplatePath{template/}
}{}

%%% Header / Footer Styles %%%

\RenewDocumentCommand{\headrule}{}{%
    \rule[0.1cm]{\textwidth}{0.1mm}%
    \vspace{-0.75cm}
}

\ifthenelse{\isundefined{\MyTitle}}{}{%
    \fancyhf[HC]{{\slshape \MyTitle{}}}
}%

\RenewDocumentCommand{\footrule}{}{%
    \rule[0.1cm]{\textwidth}{0.1mm}%
}

\renewcommand{\thefootnote}{\Roman{footnote}} 
    % Changing footnotes arabic to roman numbers

%%% Redefine \maketitle %%% 

\NewDocumentCommand{\normalTemplateTitle}{s}{%
    \begin{@twocolumntrue}%
        \begin{minipage}{0.3\textwidth}%
            \begin{Center}
                \vspace*{\fill}
                \includegraphics[width=0.6\textwidth]{\TemplatePath src/unal_logo.pdf}%
                \vspace*{\fill}
            \end{Center}
        \end{minipage}%
        \begin{minipage}{0.7\textwidth}{%
            \begin{Center}
                \vspace*{\fill}
                \ifthenelse{\isundefined{\MyClass}}{%
                    {\large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[0ex]%
                }{%

                    {\large \itshape \MyClass{}} \\[1ex]
                }%
                \ifthenelse{\isundefined{\MyTitle}}{%
                    {\huge Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
                }{%
                    {\huge \slshape \MyTitle{}} \\[4ex]%
                }%
                \ifthenelse{\isundefined{\MyAuthor}}{%
                    {\Large Set \textbackslash{}def\textbackslash{}MyAuthor\{your\_name\} in the preamble} \\%
                }{%
                    {\Large \MyAuthor{}} \\%
                }%
                \ifthenelse{\isundefined{\MyEmail}}{%
                    {\small Set \textbackslash{}def\textbackslash{}MyEmail\{your\_email\} in the preamble} \\[4ex]%
                }{%
                    {\small \MyEmail{}} \\[4ex]%
                }%
                \ifthenelse{\isundefined{\MyDate}}{%
                    Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble%
                }{%
                    \MyDate{}%
                }%
                \vspace*{\fill}
            \end{Center}
        }%
        \end{minipage}%
    \end{@twocolumntrue}%
    \begin{Center}%
        \rule[0cm]{\textwidth}{0.1mm}%
    \end{Center}%
    %\vspace{0.25cm}%
}

\NewDocumentCommand{\fullpageTemplateTitle}{s}{%
    \fancypagestyle{titlepage}{%       
        \fancyhf{}
        \RenewDocumentCommand{\headrule}{}{%
            \rule[0.1cm]{\textwidth}{0.1mm}%
        }
        
        \fancyfoot{}
        \RenewDocumentCommand{\footrule}{}{%
            \rule[0.1cm]{\textwidth}{0.1mm}%
        }
    }

    \thispagestyle{titlepage}
    \vspace{0.25\textheight}
    \begin{Center}
        \ifthenelse{\isundefined{\MyClass}}{%
            {\Large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[0ex]%
        }{%
            {\Large \itshape \MyClass{}} \\[0.25cm]
        }%
        \ifthenelse{\isundefined{\MyTitle}}{%
            {\Huge Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
        }{%
            {\Huge \slshape \MyTitle{}} \\[0.25cm]%
        }%
    \end{Center}
    \vspace{0.25\textheight}
    \begin{Center}
        \ifthenelse{\isundefined{\MyAuthor}}{%
            {\huge Set \textbackslash{}def\textbackslash{}MyAuthor\{your\_name\} in the preamble} \\%
        }{%
            {\huge \MyAuthor{}} \\[0.25cm]%
        }%
        \ifthenelse{\isundefined{\MyEmail}}{%
            {\large Set \textbackslash{}def\textbackslash{}MyEmail\{your\_email\} in the preamble} \\[4ex]%
        }{%
            {\large \MyEmail{}}%
        }%
    \end{Center}
    \vspace{0.25\textheight}
    \begin{Center}
        \includegraphics[height=0.2\textheight]{\TemplatePath src/unal_logo.pdf} \\[1cm]
        {\large Universidad Nacional de Colombia} \\[1ex]
        {\large Bogotá, D.C.} \\[1ex]
        \ifthenelse{\isundefined{\MyDate}}{%
            \large Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble%
        }{%
            \large \MyDate{} \\[1ex]%
        }%
    \end{Center}
    \newpage{}
    \setcounter{page}{1}
}

\NewDocumentCommand{\smallTemplateTitle}{s}{%
    \begin{@twocolumntrue}
        \begin{minipage}{0.15\textwidth}
            \begin{Center}
                \vspace*{\fill}
                \includegraphics[width=0.8\textwidth]{\TemplatePath src/unal_logo.pdf}%
                \vspace*{\fill}
            \end{Center}
        \end{minipage}
        \begin{minipage}{0.5\textwidth}
            \begin{Center}
                \vspace*{\fill}
                \ifthenelse{\isundefined{\MyClass}}{%
                    {\large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[1ex]%
                }{%
                    {\large \itshape \MyClass{}} \\
                }%
                \ifthenelse{\isundefined{\MyTitle}}{%
                    {\Large Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
                }{%
                    {\Large \slshape \MyTitle{}} \\[0.5ex]%
                }%
                \ifthenelse{\isundefined{\MyDate}}{%
                    {\footnotesize Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble}%
                }{%
                    {\footnotesize \MyDate{}}%
                }%
                \vspace*{\fill}
            \end{Center}
        \end{minipage}
        \begin{minipage}{0.3\textwidth}
            \begin{FlushRight}
                \ifthenelse{\isundefined{\MyAuthor}}{%
                    {Set \textbackslash{}def\textbackslash{}MyAuthor\{your\_name\} in the preamble} \\%
                }{%
                    {\MyAuthor{}} \\[-1ex]%
                }%
                \ifthenelse{\isundefined{\MyEmail}}{%
                    {\footnotesize Set \textbackslash{}def\textbackslash{}MyEmail\{your\_email\} in the preamble} \\[4ex]%
                }{%
                    {\footnotesize \MyEmail{}}%
                }%
            \end{FlushRight}
        \end{minipage}
    \end{@twocolumntrue}
    \begin{Center}%
        \rule[0cm]{\textwidth}{0.1mm}%
    \end{Center}%
    %\vspace{0.25cm}%
}

\NewDocumentCommand{\multipleTemplateTitle}{}{%
    \begin{@twocolumntrue}%
        \begin{minipage}{0.45\textwidth}%
            \begin{Center}
                \vspace*{\fill}
                \ifthenelse{\isundefined{\MyClass}}{%
                    {\large Set \textbackslash{}def\textbackslash{}MyClass\{your\_class\} in the preamble} \\[0ex]%
                }{%
                    {\large \itshape \MyClass{}} \\[1ex]
                }%
                \ifthenelse{\isundefined{\MyTitle}}{%
                    {\huge Set \textbackslash{}def\textbackslash{}MyTitle\{doc\_title\} in the preamble} \\[4ex]%
                }{%
                    {\huge \slshape \MyTitle{}} \\[2ex]%
                }%
                \ifthenelse{\isundefined{\MyDate}}{%
                    Set \textbackslash{}def\textbackslash{}MyDate\{doc\_date\} in the preamble%
                }{%
                    \MyDate{} \\[3ex]%
                }%
                \includegraphics[width=0.35\textwidth]{\TemplatePath src/unal_logo.pdf} \\[2ex]%
                \vspace*{\fill}
            \end{Center}
        \end{minipage}%
        \begin{minipage}{0.5\textwidth}{%
            \begin{FlushRight}
                \vspace*{\fill}
                \ifthenelse{\isundefined{\MyAuthors}}{%
                    {\Large Set \textbackslash{}def\textbackslash{}MyAuthors\{author\_name, author\_email, \(\cdots\)\} in the preamble} \\%
                }{%
                    \MyAuthors{}
                }%
                \vspace*{\fill}
            \end{FlushRight}
        }%
        \end{minipage}%
    \end{@twocolumntrue}%
    \begin{Center}%
        \rule[0cm]{\textwidth}{0.1mm}%
    \end{Center}%
    %\vspace{0.25cm}%
}

\RenewDocumentCommand{\maketitle}{O{}}{%
    \InitTemplate{}

    \IfNoValueTF{#1}{%
        \normalTemplateTitle{}%
    }{\IfStrEqCase{#1}{%
        {small}{\smallTemplateTitle{}}%
        {normal}{\normalTemplateTitle{}}%
        {fullpage}{\fullpageTemplateTitle{}}%
        {multiple}{\multipleTemplateTitle{}}%
        }[% default
            \normalTemplateTitle{}%
        ]
    }%
}

%%% General Structure Stuff %%%

%% InitTemplate Command
% Set Document the Margins
\NewDocumentCommand{\InitTemplate}{s}{%
    \newgeometry{%
        vmargin=2cm,%
        hmargin=2.25cm,%
        headheight=22pt%
    }

    \pagestyle{fancy}
}

% Enumerate Lists types
\newcommand{\listAlph}{\alph*.}
\newcommand{\listAlphP}{\alph*.)}
\newcommand{\listALPH}{\Alph*.}
\newcommand{\listALPHP}{\Alph*.)}
\newcommand{\listRoman}{\roman*.)}
\newcommand{\listROMAN}{\Roman*.)}

% Proof, Text, Context Cases
\theoremstyle{remark}
\newtheorem{TMPMathCases}{Caso}
\NewDocumentCommand{\ResetCases}{}{\setcounter{TMPMathCases}{0}}
\NewDocumentEnvironment{mathcase}{o+b}
{%
    \IfValueTF{#1}
    {%
        \begin{TMPMathCases}[#1]%
            #2 %
        \end{TMPMathCases}%
    }{%
        \begin{TMPMathCases}% 
            #2 %
        \end{TMPMathCases}%
    }
}{}

% Document Definitions
\newtheorem{TMPMathDefinition}{Definición}
\NewDocumentEnvironment{definition}{+b} {%
    \begin{tcolorbox}[left=1ex,right=1ex]%
        \begin{TMPMathDefinition}%
            #1 %
            \hspace{\fill}\(\bigtriangleup\)%
        \end{TMPMathDefinition}%
    \end{tcolorbox}%
} {}

% Document Proposition, Theorems, Lemmas and Colloraries

% Theorems
\newtheorem{TMPMathTheorem}{Teorema}
\NewDocumentEnvironment{theorem}{+b} {%
    \begin{TMPMathTheorem}%
        #1 %
    \end{TMPMathTheorem}%
} {}

% Theorems
\newtheorem{TMPMathProposition}[TMPMathTheorem]{Proposición}
\NewDocumentEnvironment{proposition}{+b} {%
    \begin{TMPMathProposition}%
        #1 %
    \end{TMPMathProposition}%
} {}

% Lemma
\newtheorem{TMPMathLemma}[TMPMathTheorem]{Lema}
\NewDocumentEnvironment{lemma}{+b} {%
    \begin{TMPMathLemma}%
        #1 %
    \end{TMPMathLemma}%
} {}

% Collorary
\newtheorem{TMPMathCorollary}[TMPMathTheorem]{Corolario}
\NewDocumentEnvironment{corollary}{+b} {%
    \begin{TMPMathCorollary}%
        #1 %
    \end{TMPMathCorollary}%
} {}

%%% General Fast Binds %%% 

% Fast Sup and Sub -scripts
\NewDocumentCommand{\ftextsup}{m}{\textsuperscript{#1}}
\NewDocumentCommand{\ftextsub}{m}{\textsubscript{#1}}

% Fast Set of Numbers 
\def\nsN{\ensuremath{\mathbb{N}}} % Natural
\def\nsZ{\ensuremath{\mathbb{Z}}} % Integer
\def\nsQ{\ensuremath{\mathbb{Q}}} % Rational
\def\nsI{\ensuremath{\mathbb{I}}} % Irational
\def\nsR{\ensuremath{\mathbb{R}}} % Real
\def\nsC{\ensuremath{\mathbb{C}}} % Complex

% Fast Function
\NewDocumentCommand{\ffunc}{mom}{\ensuremath{%
    #1%
    \IfValueTF{#2}{%
        \upharpoonright_{#2}
    }{}%
    \left( #3 \right) %
}}
\NewDocumentCommand{\ffuncp}{mom}{\ensuremath{%
    \left(#1\right)%
    \IfValueTF{#2}{%
        \upharpoonright_{#2}
    }{}%
    \left( #3 \right) %
}}

% Fast inverse 
\NewDocumentCommand{\finv}{m}{\ensuremath{%
    #1^{-1}
}}

% Fast Inverse (image) function
\NewDocumentCommand{\ffuncinv}{mm}{\ensuremath{%
    #1^{-1}\left( #2 \right) %
}
}
% Fast Inverse (image) function
\NewDocumentCommand{\ffuncrest}{mm}{\ensuremath{%
    #1\upharpoonright_{#2} %
}}

% Fast Max and Min
\NewDocumentCommand{\fmin}{m}{\ensuremath{%
    \text{mín}#1%
}}
\NewDocumentCommand{\fminp}{m}{\ensuremath{%
    \text{mín}\left(#1\right)%
}}
\NewDocumentCommand{\fminset}{m}{\ensuremath{%
    \text{mín}\left\{#1\right\}%
}}
\NewDocumentCommand{\fmax}{m}{\ensuremath{%
    \text{máx}#1%
}}
\NewDocumentCommand{\fmaxp}{m}{\ensuremath{%
    \text{máx}\left(#1\right)%
}}
\NewDocumentCommand{\fmaxset}{m}{\ensuremath{%
    \text{máx}\left\{#1\right\}%
}}

% Fast Function Domain
\NewDocumentCommand{\fdom}{m}{\ensuremath{%
    \text{Dom}\left( #1 \right)%
}}

% Fast Function Range
\NewDocumentCommand{\fran}{m}{\ensuremath{%
  \text{Ran}\left( #1 \right)%
}}

% Fast Function Field
\NewDocumentCommand{\ffield}{m}{\ensuremath{%
    \text{Field}\left( #1 \right)%
}}

% Fast Function Image 
\NewDocumentCommand{\fimg}{m}{\ensuremath{%
    \text{Im}\left( #1 \right)%
}}

% Fast Kernel
\NewDocumentCommand{\fker}{m}{\ensuremath{%
    \text{ker}\left( #1 \right)%
}}

% Fast Lower/Upper Bounds Stuff
\NewDocumentCommand{\flowbnd}{m}{\ensuremath{%
    \text{CotInf}\left( #1 \right)%
}}
\NewDocumentCommand{\fuppbnd}{m}{\ensuremath{%
    \text{CotSup}\left( #1 \right)%
}}
\NewDocumentCommand{\fsup}{m}{\ensuremath{%
    \text{sup}\left( #1 \right)%
}}
\NewDocumentCommand{\finf}{m}{\ensuremath{%
    \text{inf}\left( #1 \right)%
}}

% Fast Set 
\NewDocumentCommand{\fset}{m}{\ensuremath{%
    \left\{ #1 \right\}%
}}
